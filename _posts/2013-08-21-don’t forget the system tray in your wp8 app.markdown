---
layout: post
title: "don’t forget the system tray in your wp8 app"
date: 2013-08-21 10:35:25 +0200
comments: true
published: true
categories: ["post"]
tags: [".Net", "Devices", "WP7", "WP8", "XAML"]
alias: ["/blog/post/2013/08/21/.aspx"]
author: Nico Vermeir
redirect_from:
 - /blog/post/2013/08/21/.aspx
 - /blog/post/2013/08/21/.aspx
---
<p>The system tray in Windows Phone 8 is the small bar at the top where the clock, signal strength, connectivity icons, etc. reside. In most apps I’ve used developers tend to do one of two things there:</p>  <ul>   <li>leave it</li>    <li>hide it</li> </ul>  <p>An example here is Microsoft’s Facebook app (yes, even the first party apps do this), take a look</p>  <p><a href="http://i40.tinypic.com/14iq3xe.jpg" target="_blank"><img src="http://i40.tinypic.com/14iq3xe.jpg" width="161" height="268" /></a></p>  <p>This is a pretty decent looking app (yes it violates a bunch of “Modern UI” guidelines but it does look decent). However, the black system tray at the top of the screen breaks the experience. It feels like the app lies on top of the homescreen, while this is actually true it’s a better user experience to suck the user completely into the application.</p>  <p>Another option for the Facebook app would be to hide the system tray, this won’t break the experience for the user on the visual side.</p>  <p><a href="http://i42.tinypic.com/2lnh6it.jpg" target="_blank"><img src="http://i42.tinypic.com/2lnh6it.jpg" width="159" height="255" /></a></p>  <p>But this solution has another downside, the Facebook app needs an active internet connection to work, suppose the app throws an error saying that your internet connection is down, what’s your first reaction? You check the signal strength and / or wifi connectivity icon, and where do those live? In the system tray that is hidden now, so the user needs to exit the app to check the system tray (same goes for checking the time).</p>  <p>Only hide the system tray when your app absolutely requires it, like a game that needs all the screen estate it can get.</p>  <p>So let’s try a third solution, something a lot of Windows Phone developers tend to forget or don’t know is possible, we can style the system tray. This is what the Facebook app could look like</p>  <p><a href="http://i40.tinypic.com/2vailg3.jpg" target="_blank"><img src="http://i40.tinypic.com/2vailg3.jpg" width="160" height="267" /></a></p>  <p>By simply giving the system tray the same color as the header bar of the app we’ve give the app a little extra while still having a visible system tray. </p>  <p>I used this approach in my Traffic Chat app</p>  <p><a href="http://i39.tinypic.com/9sax42.jpg" target="_blank"><img src="http://i39.tinypic.com/9sax42.jpg" width="158" height="263" /></a></p>  <p>Same story in this app, it looks much more like a part of the OS instead of “just an app”.</p>  <h2>Let’s do it!</h2>  <p>It’s actually very easy to get this done.</p>  <p>In your Windows Phone application, navigate to the App.xaml page. In that page there should be an Application.Resources tag. As you might (should) know, we can define application wide styles here, if we don’t provide a key to a style it applies to all controls of the specified type throughout the app. Sounds easy enough, let’s do it.</p>  <div id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:26fb39a7-e373-4156-9d7d-de0a478c4fab" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"> <div style="border: #000080 1px solid; color: #000; font-family: 'Courier New', Courier, Monospace; font-size: 10pt"> <div style="background: #000080; color: #fff; font-family: Verdana, Tahoma, Arial, sans-serif; font-weight: bold; padding: 2px 5px">Code Snippet</div> <div style="background: #ddd; max-height: 300px; overflow: auto"> <ol start="1" style="background: #ffffff; margin: 0 0 0 2em; padding: 0 0 0 5px;"> <li><span style="background:#ffffff;color:#0000ff">&lt;</span><span style="background:#ffffff;color:#a31515">Style</span><span style="background:#ffffff;color:#ff0000"> TargetType</span><span style="background:#ffffff;color:#0000ff">=&quot;phone:PhoneApplicationPage&quot;&gt;</span></li> <li style="background: #f3f3f3">    <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#0000ff">&lt;</span><span style="background:#ffffff;color:#a31515">Setter</span><span style="background:#ffffff;color:#ff0000"> Property</span><span style="background:#ffffff;color:#0000ff">=&quot;shell:SystemTray.BackgroundColor&quot;</span><span style="background:#ffffff;color:#ff0000"> Value</span><span style="background:#ffffff;color:#0000ff">=&quot;Red&quot; /&gt;</span></li> <li>    <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#0000ff">&lt;</span><span style="background:#ffffff;color:#a31515">Setter</span><span style="background:#ffffff;color:#ff0000"> Property</span><span style="background:#ffffff;color:#0000ff">=&quot;shell:SystemTray.ForegroundColor&quot;</span><span style="background:#ffffff;color:#ff0000"> Value</span><span style="background:#ffffff;color:#0000ff">=&quot;Green&quot; /&gt;</span></li> <li style="background: #f3f3f3"><span style="background:#ffffff;color:#0000ff">&lt;/</span><span style="background:#ffffff;color:#a31515">Style</span><span style="background:#ffffff;color:#0000ff">&gt;</span></li> </ol> </div> </div> </div>  <p>The style has a target type of PhoneApplicationPage, the class that is used by all pages in a Windows Phone app. We set the backgroundcolor to Red and the Foregroundcolor to Green, this will look very pretty right? <img class="wlEmoticon wlEmoticon-smile" style="border-top-style: none; border-left-style: none; border-bottom-style: none; border-right-style: none" alt="Glimlach" src="http://www.spikie.be/blog/images/wlEmoticon-smile_26.png" /></p>  <p>If we run the app now you’ll see that nothing has changed. A downside of this is that not providing a key doesn’t work for the PhoneApplicationPage, so we’ll need to name the style and apply it to every page in the application.</p>  <p>Change the above code to this (add a key, name it whatever you want)</p>  <div id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:7e53b140-563b-495e-a5b4-b1ac0e6efca9" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"> <div style="border: #000080 1px solid; color: #000; font-family: 'Courier New', Courier, Monospace; font-size: 10pt"> <div style="background: #000080; color: #fff; font-family: Verdana, Tahoma, Arial, sans-serif; font-weight: bold; padding: 2px 5px">Code Snippet</div> <div style="background: #ddd; max-height: 300px; overflow: auto"> <ol start="1" style="background: #ffffff; margin: 0 0 0 2em; padding: 0 0 0 5px;"> <li><span style="background:#ffffff;color:#0000ff">&lt;</span><span style="background:#ffffff;color:#a31515">Style</span><span style="background:#ffffff;color:#ff0000"> x</span><span style="background:#ffffff;color:#0000ff">:</span><span style="background:#ffffff;color:#ff0000">Key</span><span style="background:#ffffff;color:#0000ff">=&quot;DefaultPageStyle&quot;</span><span style="background:#ffffff;color:#ff0000"> TargetType</span><span style="background:#ffffff;color:#0000ff">=&quot;phone:PhoneApplicationPage&quot;&gt;</span></li> <li style="background: #f3f3f3">    <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#0000ff">&lt;</span><span style="background:#ffffff;color:#a31515">Setter</span><span style="background:#ffffff;color:#ff0000"> Property</span><span style="background:#ffffff;color:#0000ff">=&quot;shell:SystemTray.BackgroundColor&quot;</span><span style="background:#ffffff;color:#ff0000"> Value</span><span style="background:#ffffff;color:#0000ff">=&quot;Red&quot; /&gt;</span></li> <li>    <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#0000ff">&lt;</span><span style="background:#ffffff;color:#a31515">Setter</span><span style="background:#ffffff;color:#ff0000"> Property</span><span style="background:#ffffff;color:#0000ff">=&quot;shell:SystemTray.ForegroundColor&quot;</span><span style="background:#ffffff;color:#ff0000"> Value</span><span style="background:#ffffff;color:#0000ff">=&quot;Green&quot; /&gt;</span></li> <li style="background: #f3f3f3"><span style="background:#ffffff;color:#0000ff">&lt;/</span><span style="background:#ffffff;color:#a31515">Style</span><span style="background:#ffffff;color:#0000ff">&gt;</span></li> </ol> </div> </div> </div>  <p>And on every page that you want to style the systemtray, apply the style (line 15 in this code block).</p>  <p>   <div id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:29c5ab4e-9c96-4a29-9141-afb47ae1a84f" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"> <div style="border: #000080 1px solid; color: #000; font-family: 'Courier New', Courier, Monospace; font-size: 10pt"> <div style="background: #000080; color: #fff; font-family: Verdana, Tahoma, Arial, sans-serif; font-weight: bold; padding: 2px 5px">Code Snippet</div> <div style="background: #ddd; max-height: 500px; overflow: auto"> <ol start="1" style="background: #ffffff; margin: 0 0 0 2.5em; padding: 0 0 0 5px;"> <li><span style="background:#ffffff;color:#0000ff">&lt;</span><span style="background:#ffffff;color:#a31515">phone</span><span style="background:#ffffff;color:#0000ff">:</span><span style="background:#ffffff;color:#a31515">PhoneApplicationPage</span></li> <li style="background: #f3f3f3">   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> x</span><span style="background:#ffffff;color:#0000ff">:</span><span style="background:#ffffff;color:#ff0000">Class</span><span style="background:#ffffff;color:#0000ff">=&quot;PhoneApp1.MainPage&quot;</span></li> <li>   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> xmlns</span><span style="background:#ffffff;color:#0000ff">=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span></li> <li style="background: #f3f3f3">   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> xmlns</span><span style="background:#ffffff;color:#0000ff">:</span><span style="background:#ffffff;color:#ff0000">x</span><span style="background:#ffffff;color:#0000ff">=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span></li> <li>   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> xmlns</span><span style="background:#ffffff;color:#0000ff">:</span><span style="background:#ffffff;color:#ff0000">phone</span><span style="background:#ffffff;color:#0000ff">=&quot;clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone&quot;</span></li> <li style="background: #f3f3f3">   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> xmlns</span><span style="background:#ffffff;color:#0000ff">:</span><span style="background:#ffffff;color:#ff0000">shell</span><span style="background:#ffffff;color:#0000ff">=&quot;clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone&quot;</span></li> <li>   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> xmlns</span><span style="background:#ffffff;color:#0000ff">:</span><span style="background:#ffffff;color:#ff0000">d</span><span style="background:#ffffff;color:#0000ff">=&quot;http://schemas.microsoft.com/expression/blend/2008&quot;</span></li> <li style="background: #f3f3f3">   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> xmlns</span><span style="background:#ffffff;color:#0000ff">:</span><span style="background:#ffffff;color:#ff0000">mc</span><span style="background:#ffffff;color:#0000ff">=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;</span></li> <li>   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> mc</span><span style="background:#ffffff;color:#0000ff">:</span><span style="background:#ffffff;color:#ff0000">Ignorable</span><span style="background:#ffffff;color:#0000ff">=&quot;d&quot;</span></li> <li style="background: #f3f3f3">   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> FontFamily</span><span style="background:#ffffff;color:#0000ff">=&quot;{</span><span style="background:#ffffff;color:#a31515">StaticResource</span><span style="background:#ffffff;color:#ff0000"> PhoneFontFamilyNormal}</span><span style="background:#ffffff;color:#0000ff">&quot;</span></li> <li>   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> FontSize</span><span style="background:#ffffff;color:#0000ff">=&quot;{</span><span style="background:#ffffff;color:#a31515">StaticResource</span><span style="background:#ffffff;color:#ff0000"> PhoneFontSizeNormal}</span><span style="background:#ffffff;color:#0000ff">&quot;</span></li> <li style="background: #f3f3f3">   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> Foreground</span><span style="background:#ffffff;color:#0000ff">=&quot;{</span><span style="background:#ffffff;color:#a31515">StaticResource</span><span style="background:#ffffff;color:#ff0000"> PhoneForegroundBrush}</span><span style="background:#ffffff;color:#0000ff">&quot;</span></li> <li>   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> SupportedOrientations</span><span style="background:#ffffff;color:#0000ff">=&quot;Portrait&quot;</span><span style="background:#ffffff;color:#ff0000"> Orientation</span><span style="background:#ffffff;color:#0000ff">=&quot;Portrait&quot;</span></li> <li style="background: #f3f3f3">   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> shell</span><span style="background:#ffffff;color:#0000ff">:</span><span style="background:#ffffff;color:#ff0000">SystemTray.IsVisible</span><span style="background:#ffffff;color:#0000ff">=&quot;True&quot;</span></li> <li>   <span style="background:#ffffff;color:#000000"></span><span style="background:#ffffff;color:#ff0000"> Style</span><span style="background:#ffffff;color:#0000ff">=&quot;{</span><span style="background:#ffffff;color:#a31515">StaticResource</span><span style="background:#ffffff;color:#ff0000"> DefaultPageStyle}</span><span style="background:#ffffff;color:#0000ff">&quot;&gt;</span></li> </ol> </div> </div> </div> </p>  <p>If we run the app now we’ll get a “beautiful” styled system tray.</p>  <p><a href="http://i41.tinypic.com/dwwe1y.jpg" target="_blank"><img src="http://i41.tinypic.com/dwwe1y.jpg" width="150" height="250" /></a></p>  <p>&#160;</p>  <h2>Conclusion</h2>  <p>Styling the system tray is something that is often overlooked. Spend some time on this, it’ll make your app look even better without annoying your users with a hidden system tray. It’s easy to do and doesn’t take a lot of time.</p>  <p>Download the Green/Red system tray app from my <a href="http://sdrv.ms/16v47XC" target="_blank">SkyDrive</a></p>
{% include imported_disclaimer.html %}
